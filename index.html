<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MacroFit Pro ‚Äì V3 Morphotype Ultra</title>
<style>
:root{
  --bg:#050709;
  --card:#0b0f14;
  --panel:#0f141b;
  --input:#111820;
  --border:#1e2833;
  --accent:#c9f02f;
  --accent-dim:#c9f02f22;
  --text:#e8eef4;
  --muted:#9aa6b2;
  --gold:#d4af37;
}
*{box-sizing:border-box;}
body{
  margin:0;
  padding:0;
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background:linear-gradient(180deg, #0b0f14 0%, #050709 100%);
  color:var(--text);
  min-height:100vh;
}
.app{
  max-width: 720px;
  margin:30px auto;
  background:var(--card);
  padding:24px;
  border-radius:20px;
  box-shadow:0 0 40px rgba(0,0,0,.9);
  border:1px solid var(--border);
  position:relative;
}
.app::before{
  content:"";
  display:block;
  height:5px;
  background:linear-gradient(90deg, var(--gold), var(--accent), #0b0f14);
  margin:-24px -24px 20px -24px;
  border-radius:20px 20px 0 0;
}
.header{text-align:center;margin-bottom:18px;}
h1{margin:0;color:var(--accent);font-size:26px;font-weight:800;}
.subtitle{font-size:13px;color:var(--muted);margin-top:6px;}
.section{margin-top:22px;padding-top:18px;border-top:1px solid var(--border);}
.section h2{color:var(--accent);font-size:18px;}
.field{ margin-top:12px; }
label{display:block;font-weight:700;margin-bottom:5px;font-size:14px;color:var(--muted);}
input, select, textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--input);
  color:white;
  font-size:16px;
}
button{
  width:100%;
  margin-top:18px;
  padding:13px;
  border-radius:16px;
  border:none;
  background:linear-gradient(90deg, var(--gold), var(--accent));
  color:#050709;
  font-weight:900;
  font-size:16px;
  text-transform:uppercase;
  letter-spacing:1px;
  cursor:pointer;
}
.table-box{
  margin-top:18px;
  background:var(--panel);
  padding:14px;
  border-radius:16px;
  border-left:5px solid var(--accent);
}
table{width:100%;border-collapse:collapse;margin-top:8px;}
th, td{border:1px solid var(--border);padding:8px;text-align:center;font-size:14px;}
th{background:#0b0f14;color:var(--accent);}
.result{ font-weight:800; }
.note{font-size:12px;color:var(--muted);}
.footer{margin-top:18px;font-size:12px;text-align:center;color:var(--muted);}
.reco-box{margin-top:12px;padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--panel);}
.reco-title{color:var(--accent);font-weight:800;margin-bottom:6px;}
.explain{
  margin-top:10px;
  font-size:12px;
  color:var(--muted);
  background:#0b0f14;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
}
</style>
</head>
<body>

<div class="app">
  <div class="header">
    <h1>‚öúÔ∏è MacroFit Pro ‚Äî V3 MORPHOTYPE ‚öúÔ∏è</h1>
    <div class="subtitle">Ultra calculs m√©taboliques, morphologiques et personnalis√©s</div>
  </div>

  <!-- ========== 1) DONN√âES (inchang√©, sans tour de taille) ========== -->
  <div class="section">
    <h2>1) Donn√©es de base</h2>
    <div class="field"><label>√Çge</label><input type="number" id="age"></div>
    <div class="field"><label>Taille (cm)</label><input type="number" id="taille"></div>
    <div class="field"><label>Poids (kg)</label><input type="number" id="poids"></div>
    <div class="field"><label>Sexe</label>
      <select id="sexe"><option value="M">Homme</option><option value="F">Femme</option></select>
    </div>
    <div class="field"><label>Niveau d'activit√©</label>
      <select id="activite">
        <option value="1.2">S√©dentaire</option>
        <option value="1.375">L√©ger</option>
        <option value="1.55">Mod√©r√©</option>
        <option value="1.725">Tr√®s actif</option>
        <option value="1.9">Extr√™me</option>
      </select>
    </div>
    <div class="field"><label>Sommeil (h)</label><input type="number" id="sommeil"></div>
    <div class="field"><label>Stress (1‚Äì10)</label><input type="number" id="stress"></div>
  </div>

  <!-- ========== 2) MORPHO (inchang√©) ========== -->
  <div class="section">
    <h2>2) Choisis ta morphologie (cl√© V3)</h2>
    <select id="morpho">
      <option value="auto">Auto (calcul√©)</option>
      <option value="ecto">Ectomorphe</option>
      <option value="meso">M√©somorphe</option>
      <option value="endo">Endomorphe</option>
    </select>
    <div class="note">Influence : TDEE, macros et recommandations.</div>
  </div>

  <button id="btnCalc">CALCULER TOUT (V3)</button>

  <!-- ========== 3) M√âTABOLISME (inchang√© + explication d√©j√† l√†) ========== -->
  <div class="section">
    <h2>3) Bloc M√©tabolisme (BMR & TDEE)</h2>
    <div class="table-box">
      <table>
        <tr><th>BMR HB</th><th>BMR Mifflin</th><th>TDEE brut</th><th>TDEE ajust√©</th></tr>
        <tr>
          <td id="bmr_hb" class="result">-</td>
          <td id="bmr_m" class="result">-</td>
          <td id="tdee_brut" class="result">-</td>
          <td id="tdee_adj" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ========== 4) MORPHOLOGIE (inchang√©) ========== -->
  <div class="section">
    <h2>4) Bloc Morphologie & Composition</h2>
    <div class="table-box">
      <table>
        <tr><th>IMC</th><th>Cat√©gorie</th><th>Somatotype final</th></tr>
        <tr>
          <td id="imc" class="result">-</td>
          <td id="imc_cat" class="result">-</td>
          <td id="somato" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ========== 5) MACROS (inchang√©) ========== -->
  <div class="section">
    <h2>5) Bloc Macros personnalis√©es (g/jour)</h2>
    <div class="table-box">
      <table>
        <tr><th>Objectif</th><th>Prot√©ines</th><th>Lipides</th><th>Glucides</th></tr>
        <tr><td>Maintien</td><td id="p_maint" class="result">-</td><td id="l_maint" class="result">-</td><td id="g_maint" class="result">-</td></tr>
        <tr><td>S√®che</td><td id="p_cut" class="result">-</td><td id="l_cut" class="result">-</td><td id="g_cut" class="result">-</td></tr>
        <tr><td>Prise</td><td id="p_bulk" class="result">-</td><td id="l_bulk" class="result">-</td><td id="g_bulk" class="result">-</td></tr>
      </table>
    </div>
  </div>

  <!-- ========== 6) FATIGUE (inchang√©) ========== -->
  <div class="section">
    <h2>6) Bloc Fatigue & R√©cup√©ration</h2>
    <div class="table-box">
      <table>
        <tr><th>Score fatigue</th><th>Ajustement calories</th><th>Priorit√©s</th></tr>
        <tr>
          <td id="fatigue" class="result">-</td>
          <td id="cal_adj" class="result">-</td>
          <td id="recup" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ========== üî• NOUVEAU BLOC 7 : INDICATEURS QUOTIDIENS ========== -->
  <div class="section">
    <h2>7) Indicateurs Quotidiens</h2>
    <div class="table-box">
      <table>
        <tr>
          <th>Hydratation</th>
          <th>Objectif global</th>
          <th>Caf√©ine max</th>
          <th>Pas / jour</th>
        </tr>
        <tr>
          <td id="water" class="result">-</td>
          <td id="objective" class="result">-</td>
          <td id="caffeine" class="result">-</td>
          <td id="steps" class="result">-</td>
        </tr>
      </table>
    </div>
    <div class="explain">
      <b>Ce que signifie ce bloc :</b><br>
      ‚Ä¢ Hydratation = besoin d‚Äôeau bas√© sur ton poids.<br>
      ‚Ä¢ Objectif = direction (prise, maintien, s√®che).<br>
      ‚Ä¢ Caf√©ine = limite de s√©curit√© quotidienne.<br>
      ‚Ä¢ Pas = activit√© g√©n√©rale hors sport.
    </div>
  </div>

  <!-- ========== üî• NOUVEAU BLOC 8 : ANALYSE M√âTABOLIQUE ========== -->
  <div class="section">
    <h2>8) Analyse M√©tabolique</h2>
    <div class="table-box">
      <table>
        <tr>
          <th>Score m√©tabolique</th>
          <th>D√©pense / s√©ance</th>
          <th>Vitesse m√©tabolique</th>
          <th>Strat√©gie calories</th>
        </tr>
        <tr>
          <td id="score" class="result">-</td>
          <td id="burn" class="result">-</td>
          <td id="metabolic_speed" class="result">-</td>
          <td id="cal_strategy" class="result">-</td>
        </tr>
      </table>
    </div>
    <div class="explain">
      <b>Ce que signifie ce bloc :</b><br>
      ‚Ä¢ Le score refl√®te ta proximit√© avec un IMC ‚Äúoptimal‚Äù.<br>
      ‚Ä¢ D√©pense / s√©ance = estimation moyenne √† l‚Äôentra√Ænement.<br>
      ‚Ä¢ Vitesse m√©tabolique d√©pend de ton somatotype.<br>
      ‚Ä¢ Strat√©gie calories = orientation nutritionnelle.
    </div>
  </div>

  <!-- ========== üî• NOUVEAU BLOC 9 : RECOMMANDATIONS + INTERPR√âTATION ========== -->
  <div class="section">
    <h2>9) Recommandations & Interpr√©tation</h2>

    <div class="reco-box" id="reco_global"></div>
    <div class="reco-box" id="reco_prot"></div>
    <div class="reco-box" id="reco_supp"></div>

    <div class="explain">
      <b>Ce que signifie ce bloc :</b><br>
      Il synth√©tise ton profil (morphotype, fatigue, IMC) pour te donner
      des conseils concrets et personnalis√©s.
    </div>

    <div class="reco-box">
      <div class="reco-title">Interpr√©tation personnalis√©e</div>
      <p id="advice"></p>
    </div>
  </div>

  <div class="section">
    <h2>Notes m√©thodologiques</h2>
    <p class="note">
    ‚Ä¢ BMR : Harris-Benedict & Mifflin.<br>
    ‚Ä¢ TDEE ajust√© selon morphotype.<br>
    ‚Ä¢ Macros adapt√©es au morphotype.<br>
    ‚Ä¢ Fatigue bas√©e sur sommeil + stress.<br>
    ‚Ä¢ Outil indicatif, non m√©dical.
    </p>
  </div>

  <div class="footer">MacroFit Pro ‚Äî V3 Morphotype Ultra</div>
</div>

<script>
document.getElementById("btnCalc").addEventListener("click", function(){

const age = +document.getElementById("age").value;
const taille = +document.getElementById("taille").value;
const poids = +document.getElementById("poids").value;
const sexe = document.getElementById("sexe").value;
const act = +document.getElementById("activite").value;
const sommeil = +document.getElementById("sommeil").value || 7;
const stress = +document.getElementById("stress").value || 5;
const morpho = document.getElementById("morpho").value;

// ===== BMR =====
const bmr_hb = (sexe==="M")
? 66 + (13.7*poids)+(5*taille)-(6.8*age)
: 655 + (9.6*poids)+(1.8*taille)-(4.7*age);

const bmr_m = (sexe==="M")
? (10*poids)+(6.25*taille)-(5*age)+5
: (10*poids)+(6.25*taille)-(5*age)-161;

const tdee_brut = bmr_m * act;

// ===== IMC =====
const imc = poids / Math.pow(taille/100,2);
let imc_cat = imc<18.5?"Maigreur":imc<25?"Normal":imc<30?"Surpoids":"Ob√©sit√©";

// ===== SOMATOTYPE =====
let somato = morpho==="auto"
? (imc<20?"Ectomorphe":imc<=25?"M√©somorphe":"Endomorphe")
: (morpho==="ecto"?"Ectomorphe":morpho==="meso"?"M√©somorphe":"Endomorphe");

// ===== TDEE AJUST√â =====
let tdee_adj = tdee_brut;
if(somato==="Ectomorphe") tdee_adj*=1.05;
if(somato==="Endomorphe") tdee_adj*=0.95;

// ===== MACROS =====
function macros(cal,p,l,g){
  return {
    p: Math.round((cal*p)/4),
    l: Math.round((cal*l)/9),
    g: Math.round((cal*g)/4)
  };
}
let ratios =
somato==="Ectomorphe"
? {maint:[.28,.25,.47],cut:[.32,.23,.45],bulk:[.27,.22,.51]}
: somato==="M√©somorphe"
? {maint:[.30,.30,.40],cut:[.35,.25,.40],bulk:[.30,.25,.45]}
: {maint:[.32,.28,.40],cut:[.38,.22,.40],bulk:[.28,.22,.50]};

const mMaint = macros(tdee_adj,...ratios.maint);
const mCut   = macros(tdee_adj-350,...ratios.cut);
const mBulk  = macros(tdee_adj+350,...ratios.bulk);

// ===== FATIGUE =====
const fatigue_score = Math.max(0,Math.min(10,(10-sommeil)+(stress/2)));
let cal_adj_txt="", recup_txt="";
if(fatigue_score>=7){cal_adj_txt="-150 kcal";recup_txt="Sommeil + Magn√©sium";}
else if(fatigue_score>=4){cal_adj_txt="Maintien";recup_txt="Hydratation";}
else {cal_adj_txt="+150 kcal";recup_txt="R√©cup√©ration optimale";}

// ===== AFFICHAGE BASE =====
document.getElementById("bmr_hb").innerText=Math.round(bmr_hb);
document.getElementById("bmr_m").innerText=Math.round(bmr_m);
document.getElementById("tdee_brut").innerText=Math.round(tdee_brut);
document.getElementById("tdee_adj").innerText=Math.round(tdee_adj);
document.getElementById("imc").innerText=imc.toFixed(1);
document.getElementById("imc_cat").innerText=imc_cat;
document.getElementById("somato").innerText=somato;

// Macros
document.getElementById("p_maint").innerText=mMaint.p;
document.getElementById("l_maint").innerText=mMaint.l;
document.getElementById("g_maint").innerText=mMaint.g;
document.getElementById("p_cut").innerText=mCut.p;
document.getElementById("l_cut").innerText=mCut.l;
document.getElementById("g_cut").innerText=mCut.g;
document.getElementById("p_bulk").innerText=mBulk.p;
document.getElementById("l_bulk").innerText=mBulk.l;
document.getElementById("g_bulk").innerText=mBulk.g;

// Fatigue
document.getElementById("fatigue").innerText=fatigue_score.toFixed(1)+"/10";
document.getElementById("cal_adj").innerText=cal_adj_txt;
document.getElementById("recup").innerText=recup_txt;

// ===== INDICATEURS QUOTIDIENS =====
document.getElementById("water").innerText =
`${(poids*30).toFixed(0)}‚Äì${(poids*35).toFixed(0)} ml/j`;
document.getElementById("objective").innerText =
imc<18.5?"Prise de masse":imc<25?"Maintien":imc<30?"S√®che l√©g√®re":"Perte de gras";
document.getElementById("caffeine").innerText =
(sexe==="M"?400:300)+" mg/j max";
document.getElementById("steps").innerText =
act<=1.375?"6‚Äì8k":act<=1.55?"8‚Äì10k":"10‚Äì12k+";

// ===== ANALYSE M√âTABOLIQUE =====
const score = Math.max(0,Math.min(100,100-Math.abs(22.5-imc)*2));
document.getElementById("score").innerText=score;
document.getElementById("burn").innerText=
somato==="Ectomorphe"?"350 kcal":somato==="Endomorphe"?"280 kcal":"320 kcal";
document.getElementById("metabolic_speed").innerText=
somato==="Ectomorphe"?"Rapide":somato==="Endomorphe"?"Lent":"√âquilibr√©";
document.getElementById("cal_strategy").innerText=
imc<18.5?"Surplus progressif":imc<25?"Maintien":imc<30?"D√©ficit l√©ger":"D√©ficit contr√¥l√©";

// ===== RECOMMANDATIONS + 36 INTERPR√âTATIONS =====
document.getElementById("reco_global").innerHTML =
"<div class='reco-title'>Orientation g√©n√©rale</div>"+
(somato==="Ectomorphe"
?"Surplus l√©ger + repas fr√©quents."
:somato==="M√©somorphe"
?"√âquilibre et progression r√©guli√®re."
:"D√©ficit mod√©r√© + force + cardio.");

document.getElementById("reco_prot").innerHTML =
"<div class='reco-title'>Prot√©ines cibles</div>"+
((somato==="Endomorphe"?2.2:somato==="Ectomorphe"?1.8:2.0)*poids).toFixed(0)+" g/j";

document.getElementById("reco_supp").innerHTML =
"<div class='reco-title'>Compl√©ments</div>"+
(somato==="Ectomorphe"
?"Whey, Cr√©atine, Om√©ga-3"
:somato==="Endomorphe"
?"Whey, Om√©ga-3, Magn√©sium"
:"Whey, Cr√©atine, Vitamine D");

// 36 phrases illustratives
const advices={
maigreur:[ /* 12 phrases */ 
"Augmente progressivement tes calories.",
"Priorise glucides post-training.",
"Limite le cardio.",
"Ajoute une collation le soir.",
"Vise 7‚Äì8h de sommeil.",
"Progresse lentement en charge.",
"Choisis aliments denses.",
"Hydrate-toi bien.",
"3‚Äì4 s√©ances max.",
"√âvite les d√©ficits.",
"Augmente tes portions.",
"Suivi hebdomadaire."],
normal:[ /* 12 phrases */ 
"Maintiens tes calories.",
"Progresse en musculation.",
"Garde un bon ratio.",
"Surveille ta r√©cup.",
"Vise 8‚Äì10k pas.",
"Hydrate-toi.",
"Ajoute 1 cardio.",
"Optimise ton sommeil.",
"Stabilise ton poids.",
"Qualit√© des aliments.",
"√âvite exc√®s.",
"Planifie tes repas."],
surpoids:[ /* 12 phrases */ 
"R√©duis l√©g√®rement.",
"Augmente tes pas.",
"Priorise prot√©ines.",
"Limite sodas.",
"3 muscu + 2 cardio.",
"Suivi hebdo.",
"Hydrate-toi.",
"D√©ficit mod√©r√©.",
"Varie entra√Ænement.",
"√âvite r√©gimes extr√™mes.",
"Reste constant.",
"Planifie tes repas."],
obesite:[ /* 12 phrases */ 
"D√©ficit contr√¥l√©.",
"Muscu 3‚Äì4x.",
"Cardio r√©gulier.",
"Prot√©ines √©lev√©es.",
"R√©duction progressive.",
"Sommeil prioritaire.",
"Bonne hydratation.",
"Suivi conseill√©.",
"Pas de restrictions brutales.",
"Habitudes durables.",
"Plus d‚Äôactivit√©.",
"Suivi r√©gulier."]
};

let cat = imc<18.5?"maigreur":imc<25?"normal":imc<30?"surpoids":"obesite";
document.getElementById("advice").innerText =
advices[cat][Math.floor(Math.random()*advices[cat].length)];
});
</script>
</body>
</html>
